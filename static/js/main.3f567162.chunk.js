(window["webpackJsonpreact-text-media-editor"]=window["webpackJsonpreact-text-media-editor"]||[]).push([[0],{13:function(e,t,n){e.exports=n(23)},21:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(4),o=n.n(c),i=n(2),u=n(5),l=n(8),s=n(6),d=n(7),f=n(11),m=n.n(f),p={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1"};function v(e){return a.a.createElement("span",{className:"rtme-icon".concat(e.active?" rtme-icon-active":""),onClick:e.onClick},a.a.createElement("svg",p,a.a.createElement("path",{d:"M17 12L7 12M12 17L12 7"})))}function h(e){return a.a.createElement("span",{className:"rtme-icon",onClick:e.onClick},a.a.createElement("svg",p,a.a.createElement("path",{d:"M8 7l.74-1.11A2 2 0 0 1 10.404 5h3.192a2 2 0 0 1 1.664.89L16 7h5v11H3V7h5z"}),a.a.createElement("circle",{cx:"12",cy:"12",r:"3"})))}function g(e){return a.a.createElement("span",{className:"rtme-move-icon",onClick:e.onClick},a.a.createElement("svg",p,a.a.createElement("path",{d:"M6 7L18 7M6 12L18 12M6 17L18 17"})))}var E=n(9),O=n.n(E),b=n(12);function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat(e,"_").concat(Math.random().toString(16).substr(2,8)).concat(Math.random().toString(16).substr(2,8))}function y(e){return new Promise((function(t){var n=w("file");e._id=n;var r=new FileReader;r.onload=function(r){var a=r.target.result,c=new window.Image;c.src=a,c.onload=function(){t({_id:n,name:e.name,size:e.size,width:c.width,height:c.height,url:a})}},r.readAsDataURL(e)}))}var j=function(e){var t=Object(r.useState)(!1),n=Object(i.a)(t,2),c=n[0],o=n[1],l=Object(r.useRef)(),s=Object(r.useRef)();function d(){return(d=Object(b.a)(O.a.mark((function t(n){var r,a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(u.a)(n.target.files),s.current.value="",o(!1),t.next=5,Promise.all(r.map(y));case 5:a=t.sent,e.onUploadImage(a,r);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return l.current||(l.current="rtme-upload-".concat(Math.random().toString(16).substr(2,8))),a.a.createElement("div",{className:"rtme-control"},a.a.createElement(v,{active:c,onClick:function(){o((function(e){return!e}))}}),c&&a.a.createElement("div",{className:"rtme-ctrls"},a.a.createElement("div",{className:"rtme-upload"},a.a.createElement("label",{className:"rtme-upload-label",htmlFor:l.current},a.a.createElement(h,null)),a.a.createElement("input",{ref:s,multiple:!0,id:l.current,type:"file",accept:"image/*",onChange:function(e){return d.apply(this,arguments)}}))))},_={text:"TEXT",image:"IMAGE"},x={ENTER:13,DELETE:8},k=a.a.createContext(),C=k;function I(){return Object(r.useContext)(k)}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var T=function(e){var t=I(),n=t.focusId,c=t.setFocusId,o=t.cursor,u=t.setCursor,l=t.placeholder,d=Object(r.useRef)(),f=Object(r.useState)(),m=Object(i.a)(f,2),p=m[0],v=m[1],h=e.data,g=e.onChange,E=void 0===g?function(){}:g,O=e.onRemove,b=void 0===O?function(){}:O,w=e.onAddText,y=void 0===w?function(){}:w,_=e.onMergeTextOrRemoveOtherMedia,k=void 0===_?function(){}:_,C=e.onAddImages,T=void 0===C?function(){}:C;return Object(r.useEffect)((function(){v(d.current.scrollHeight)}),[]),Object(r.useEffect)((function(){d.current.offsetHeight!==d.current.scrollHeight&&v(d.current.scrollHeight)}),[h.raw]),Object(r.useEffect)((function(){var e,t;n===h._id?(d.current.focus(),o>-1&&(e=d.current,t=o,e&&e.setSelectionRange&&e.setSelectionRange(t,t)),u()):d.current.blur()}),[n,h._id,o,u]),a.a.createElement("div",{className:"rtme-row"},n===h._id&&a.a.createElement(j,{onUploadImage:function(e,t){return T(e,t,h)}}),a.a.createElement("textarea",{ref:d,className:"rtme-textarea",value:h.raw,onChange:function(e){E(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},h,{raw:e.target.value}))},onKeyDown:function(e){switch(e.keyCode){case x.ENTER:e.preventDefault(),y(h,e.target.selectionStart);break;case x.DELETE:e.target.value?0===e.target.selectionStart&&k(h):(e.preventDefault(),b(h))}},placeholder:l||"Please Type Something",style:p?{height:p}:void 0,onFocus:function(){c(h._id)}}),e.sortHandle)};var M=function(e){var t=I(),n=t.focusId,c=t.setFocusId,o=e.data,i=e.onRemove,u=void 0===i?function(){}:i,l=n===o._id;return Object(r.useEffect)((function(){function e(e){e.keyCode===x.DELETE&&(c(),u(o))}return n===o._id&&setTimeout((function(){document.addEventListener("keyup",e)}),150),function(){return document.removeEventListener("keyup",e)}}),[o,n,u,c]),a.a.createElement("div",{className:"rtme-row",onClick:function(){c()}},a.a.createElement("div",{className:"rtme-media-box".concat(l?" media-focused":""," media-upload-").concat(o.status),onClick:function(e){e.stopPropagation(),n!==o._id&&c(o._id)}},a.a.createElement("img",{className:"rtme-image",src:o.url,alt:o.name,style:{width:o.width}})),e.sortHandle)};var R=function(e){var t=e.data;return t.type===_.text?a.a.createElement(T,e):t.type===_.image?a.a.createElement(M,e):null};n(21);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D="row";function L(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((function(e){return e.raw||"done"===e.status})).map((function(e){e._id,e.status;return Object(l.a)(e,["_id","status"])}))}var A=Object(d.c)((function(){return a.a.createElement(g,null)})),H=Object(d.b)((function(e){var t=e.data,n=Object(l.a)(e,["data"]);return a.a.createElement(R,{data:t,onChange:n.onChange,onRemove:n.onRemove,onAddText:n.onAddText,onMergeTextOrRemoveOtherMedia:n.onMergeTextOrRemoveOtherMedia,onAddImages:n.onAddImages,sortHandle:a.a.createElement(A,null)})})),F=Object(d.a)((function(e){var t=e.items,n=Object(l.a)(e,["items"]);return a.a.createElement("div",null,t.map((function(e,t){return a.a.createElement(H,Object.assign({index:t,key:e._id,data:N({},e)},n))})))}));var z=function(e){var t=e.onChange,n=void 0===t?function(){}:t,c=Object(r.useState)(),o=Object(i.a)(c,2),l=o[0],s=o[1],d=Object(r.useState)(),f=Object(i.a)(d,2),p=f[0],v=f[1],h=Object(r.useState)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length?e.map((function(e){return N({_id:e._id||w(D)},e,{status:e.type===_.image?"done":"uploading"})})):[{_id:w(D),type:_.text,raw:""}]}(e.value||[])),g=Object(i.a)(h,2),E=g[0],O=g[1];function b(e){O(e),n(L(e))}function y(e){var t=e.map((function(e){return e._id}));O((function(r){var a=r.map((function(n){if(n.type===_.image&&t.includes(n._id)){var r=e[t.indexOf(n._id)];return N({},n,{url:r.url||n.url,status:r.status})}return n}));return n(L(a)),a}))}var j=E[0]&&E[0].type===_.text,x=E[E.length-1]&&E[E.length-1].type===_.text;return a.a.createElement(C.Provider,{value:{focusId:l,setFocusId:s,cursor:p,setCursor:v,placeholder:e.placeholder}},a.a.createElement("div",{className:"react-text-media-editor"},!j&&a.a.createElement("div",{className:"rtme-text-placeholder",onClick:function(){var e={_id:w(D),type:_.text,raw:""};b([e].concat(Object(u.a)(E))),s(e._id)}}),a.a.createElement(F,{items:E,onChange:function(e){b(E.map((function(t){return t._id===e._id?e:t})))},onRemove:function(e){if(1!==E.length){var t=E.map((function(e){return e._id})).indexOf(e._id),n=E[t-1];b(E.filter((function(t){return t._id!==e._id}))),n&&s(n._id)}else if(e.type===_.text)b([N({},e,{raw:""})]);else{var r=w(D);b([{_id:r,type:_.text,raw:""}]),s(r)}},onAddText:function(e,t){if(e.raw){var n=w(D),r={_id:n,type:_.text,raw:""};if(0===t){var a=[];return E.forEach((function(t){t._id===e._id&&a.push(r),a.push(t)})),b(a),void s(n)}if(t<e.raw.length){var c=e.raw.substr(0,t),o=e.raw.substr(t);r.raw=o;var i=[];return E.forEach((function(t){t._id===e._id?(i.push(N({},t,{raw:c})),i.push(r)):i.push(t)})),b(i),v(0),void s(n)}var u=E.map((function(e){return e._id})).indexOf(e._id),l=E[u+1];if(!l||l.type!==_.text||l.raw){var d=[];E.forEach((function(t){d.push(t),t._id===e._id&&d.push(r)})),b(d),s(n)}else s(l._id)}},onMergeTextOrRemoveOtherMedia:function(e){var t=E.map((function(e){return e._id})).indexOf(e._id),n=E[t-1];if(n&&n.type===_.text){var r=[];E.forEach((function(t){t._id===n._id?r.push(N({},t,{raw:"".concat(t.raw).concat(e.raw)})):t._id!==e._id&&r.push(t)})),b(r),v(n.raw.length),s(n._id)}},onAddImages:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,a=[];E.forEach((function(e){a.push(e),e._id===r._id&&a.push.apply(a,Object(u.a)(t.map((function(e){return N({},e,{type:_.image,status:"uploading"})}))))})),b(a),"function"===typeof e.uploadImages&&e.uploadImages(n,y)},onSortEnd:function(e){var t=e.oldIndex,n=e.newIndex;b(m()(E,t,n))},useDragHandle:!0}),!x&&a.a.createElement("div",{className:"rtme-text-placeholder",onClick:function(){var e={_id:w(D),type:_.text,raw:""};b([].concat(Object(u.a)(E),[e])),s(e._id)}})))},U=(n(22),[{type:"TEXT",raw:"React Text Media Editor Example"},{type:"IMAGE",url:"https://picsum.photos/500/150",name:"Pic.png",width:500,height:150}]);var B=function(){var e=Object(r.useState)(U),t=Object(i.a)(e,2),n=t[0],c=t[1];return a.a.createElement("div",{className:"example"},a.a.createElement("h1",null,"React Text Media Editor Example"),a.a.createElement(z,{value:n,onChange:function(e){c(e),console.log(e)},uploadImages:function(e,t){setTimeout((function(){t(e.map((function(e){return{status:"done",url:"",_id:e._id}})))}),2e3)},placeholder:"Please Input Your Idea"}))},G=document.getElementById("root");o.a.render(a.a.createElement(B,null),G)}},[[13,1,2]]]);
//# sourceMappingURL=main.3f567162.chunk.js.map